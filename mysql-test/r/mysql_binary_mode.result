RESET MASTER;
# Bug#33048 Not able to recover binary/blob data correctly using mysqlbinlog
# --------------------------------------------------------------------------
# The test verify that 0x00 and 0x0D0A sequence can be handled correctly by
# mysql

CREATE TABLE `A
B` (c1 CHAR(100));
# It is a faked statement. ASCII 0 is in the original statement, it would
# make the test result to become a binary file which was difficult to get
# the diff result if the original query was logged in the result.
INSERT INTO `A\r\nB` VALUES("A\0B");

INSERT INTO `A
B` VALUES("A
B");
SELECT HEX(c1) FROM `A
B`;
HEX(c1)
410042
410D0A42

FLUSH LOGS;
DROP TABLE `A
B`;

# '--exec mysql ...' without --binary-mode option
# It creates the table with a wrong table name and generates an error.
ERROR at line 34: ASCII '\0' appeared in the statement, but this is not allowed unless option --binary-mode is enabled and mysql is run in non-interactive mode. Set --binary-mode to 1 if ASCII '\0' is expected. Query: 'INSERT INTO `A
B` VALUES("A'.

# It is not in binary_mode, so table name '0x410D0A42' is translated to
# '0x410A42' by mysql.
DROP TABLE `A
B`;

# In binary_mode, table name '0x410D0A42' and string '0x410042' can be
# handled correctly.
SELECT HEX(c1) FROM `A
B`;
HEX(c1)
410042
410D0A42

DROP TABLE `A
B`;
