set GLOBAL query_cache_size=1355776;
CREATE TABLE t1
(`NUM` varchar(4) NOT NULL,
`UPDATE_TIME` datetime NOT NULL,
PRIMARY KEY (`NUM`,`UPDATE_TIME`))
PARTITION BY RANGE (month(UPDATE_TIME))
(PARTITION p2 VALUES LESS THAN (3) ENGINE = InnoDB,
PARTITION p3 VALUES LESS THAN (4) ENGINE = InnoDB);
SELECT * FROM t1 WHERE MONTH(update_time)=3;
NUM	UPDATE_TIME
INSERT INTO t1 VALUES ('AAA', '2010-03-11 00:00:00');
SELECT * FROM t1 WHERE MONTH(update_time)=3;
NUM	UPDATE_TIME
AAA	2010-03-11 00:00:00
ALTER TABLE t1 TRUNCATE PARTITION p3;
commit;
SELECT * FROM t1 WHERE MONTH(update_time)=3;
NUM	UPDATE_TIME
SELECT SQL_NO_CACHE * FROM t1 WHERE MONTH(update_time)=3;
NUM	UPDATE_TIME
ALTER TABLE t1 DROP PARTITION p3;
SELECT * FROM t1 WHERE MONTH(update_time)=3;
NUM	UPDATE_TIME
DROP TABLE t1;
SET GLOBAL query_cache_size= 0;
