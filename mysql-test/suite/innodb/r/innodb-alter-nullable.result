CREATE TABLE t (c1 INT PRIMARY KEY, c2 INT NOT NULL, c3 INT) ENGINE=InnoDB;
INSERT INTO t VALUES (1,2,3),(4,5,6),(7,8,9);
ALTER TABLE t CHANGE c1 c1 INT NULL FIRST, ALGORITHM=INPLACE;
ALTER TABLE t MODIFY c3 INT NOT NULL, ALGORITHM=INPLACE;
ERROR 42000: This version of MySQL doesn't yet support 'ALTER TABLE t MODIFY c3 INT NOT NULL, ALGORITHM=INPLACE'
ALTER TABLE t CHANGE c2 c2 INT, CHANGE c2 c2 INT NOT NULL;
ERROR 42S22: Unknown column 'c2' in 't'
ALTER TABLE t MODIFY c2 INT, MODIFY c2 INT NOT NULL;
ERROR 42S22: Unknown column 'c2' in 't'
ALTER TABLE t MODIFY c2 INT UNSIGNED, MODIFY c2 INT;
ERROR 42S22: Unknown column 'c2' in 't'
ALTER TABLE t MODIFY c2 CHAR(1) NOT NULL, MODIFY c2 INT NOT NULL;
ERROR 42S22: Unknown column 'c2' in 't'
ALTER TABLE t CHANGE c2 c2 INT NOT NULL, ALGORITHM=INPLACE, LOCK=NONE;
ALTER TABLE t MODIFY c2 INT NOT NULL, ALGORITHM=INPLACE, LOCK=NONE;
SET SQL_MODE='STRICT_ALL_TABLES';
UPDATE t SET c2=NULL;
ERROR 23000: Column 'c2' cannot be null
SELECT * FROM t;
c1	c2	c3
1	2	3
4	5	6
7	8	9
ALTER TABLE t MODIFY c2 INT, ALGORITHM=INPLACE;
BEGIN;
UPDATE t SET c2=NULL;
SELECT * FROM t;
c1	c2	c3
1	NULL	3
4	NULL	6
7	NULL	9
ROLLBACK;
SELECT * FROM t;
c1	c2	c3
1	2	3
4	5	6
7	8	9
ALTER TABLE t MODIFY c2 INT NULL, ALGORITHM=INPLACE;
SELECT * FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES
WHERE NAME='test/t';
TABLE_ID	NAME	FLAG	N_COLS	SPACE
19	test/t	1	6	0
DROP TABLE t;
