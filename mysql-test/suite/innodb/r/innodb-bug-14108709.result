DROP TABLE IF EXISTS t1;
CREATE TABLE t1(c1 INT) ENGINE=InnoDB;
SET SESSION TRANSACTION READ ONLY;
XA START 'x';
SELECT c1 FROM t1;
c1
XA END 'x';
XA PREPARE 'x';
XA ROLLBACK 'x';
XA START 'x';
INSERT INTO t1 VALUES(1);
ERROR 25006: Cannot execute statement in a READ ONLY transaction.
XA END 'x';
XA PREPARE 'x';
XA ROLLBACK 'x';
SET SESSION TRANSACTION READ WRITE;
DROP TABLE t1;
