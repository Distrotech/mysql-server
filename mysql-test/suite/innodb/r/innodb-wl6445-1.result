SET GLOBAL innodb_file_per_table = 1;
SELECT @@innodb_file_per_table;
@@innodb_file_per_table
1
SET GLOBAL innodb_file_format = `Barracuda`;
SELECT @@innodb_file_format;
@@innodb_file_format
Barracuda
set global innodb_large_prefix=1;
SELECT @@innodb_large_prefix;
@@innodb_large_prefix
1
DROP DATABASE IF EXISTS testdb_wl6445;
CREATE DATABASE testdb_wl6445;
USE testdb_wl6445;
CREATE TABLE t1 ( i int PRIMARY KEY , j blob) ENGINE = InnoDB;
INSERT INTO t1 VALUES (1,repeat('a',200)),(2,repeat('b',200)),(3,repeat('c',200));
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
CREATE USER 'test1'@'localhost' IDENTIFIED BY '123';
GRANT ALL ON testdb_wl6445.* TO 'test1'@'localhost';
CREATE USER 'test2'@'localhost' IDENTIFIED BY '123';
GRANT ALL ON *.* TO 'test2'@'localhost';
SET GLOBAL innodb_file_per_table = 1;
SET GLOBAL innodb_file_format = `Barracuda`;
CREATE USER 'test3'@'localhost' IDENTIFIED BY '123';
GRANT ALL ON testdb_wl6445.* TO 'test3'@'localhost';
USE testdb_wl6445;
SELECT i FROM t1 ORDER BY i;
i
1
2
3
INSERT INTO t1 VALUES (11,repeat('a',200)),(12,repeat('b',200)),(13,repeat('c',200));
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
# connection con_test1_user try to modify
SELECT user();
user()
test1@localhost
USE testdb_wl6445;
INSERT INTO t1 VALUES (11,repeat('a',200)),(12,repeat('b',200)),(13,repeat('c',200));
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
CREATE TABLE t2 ( i int ,j blob) ENGINE = Innodb;
ERROR HY000: Table 't2' is read only
UPDATE t1 SET i = i+1;
ERROR HY000: Table 't1' is read only
# disconnect con_test1_user
# connection con_test2_user 
SELECT user();
user()
test2@localhost
USE testdb_wl6445;
INSERT INTO t1 VALUES (11,repeat('a',200)),(12,repeat('b',200)),(13,repeat('c',200));
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
CREATE TABLE t2 ( i int , j blob) ENGINE = Innodb;
ERROR HY000: Table 't2' is read only
UPDATE t1 SET i = i+1;
ERROR HY000: Table 't1' is read only
FLUSH STATUS;
FLUSH LOGS;
FLUSH TABLES t1;
FLUSH TABLES WITH READ LOCK;
UNLOCK TABLES;
# disconnect con_test2_user
# connection default
USE testdb_wl6445;
INSERT INTO t1 VALUES (11,repeat('a',200)),(12,repeat('b',200)),(13,repeat('c',200));
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
CREATE TABLE t2 ( i int , j blob) ENGINE = Innodb;
ERROR HY000: Table 't2' is read only
UPDATE t1 SET i = i+1;
ERROR HY000: Table 't1' is read only
FLUSH STATUS;
FLUSH LOGS;
FLUSH TABLES t1;
FLUSH TABLES WITH READ LOCK;
UNLOCK TABLES;
USE testdb_wl6445;
DROP USER 'test1'@'localhost';
DROP USER 'test2'@'localhost';
DROP USER 'test3'@'localhost';
DROP DATABASE testdb_wl6445;
DROP DATABASE IF EXISTS testdb_wl6445;
CREATE DATABASE testdb_wl6445;
SET GLOBAL innodb_file_per_table = 1;
SET GLOBAL innodb_file_format = `Barracuda`;
USE testdb_wl6445;
CREATE TABLE t1 ( i int PRIMARY KEY , j blob) ENGINE = InnoDB;
INSERT INTO t1 VALUES (1,repeat('a',4000)),(2,repeat('b',4000)),(3,repeat('c',4000));
SELECT i,LEFT(j,20) FROM t1 ORDER BY i;
i	LEFT(j,20)
1	aaaaaaaaaaaaaaaaaaaa
2	bbbbbbbbbbbbbbbbbbbb
3	cccccccccccccccccccc
START TRANSACTION;
SAVEPOINT A;
SAVEPOINT B;
ROLLBACK TO A;
"---commit first 50 records "
COMMIT;
SELECT COUNT(*) FROM testdb_wl6445.t1;
COUNT(*)
50
USE testdb_wl6445;
INSERT INTO t1 VALUES (211,repeat('a',200)),(212,repeat('b',200)),(213,repeat('c',200));
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1 WHERE i%10=0 ORDER BY i;
i	LEFT(j,20)
10	a10a10a10a10a10a10a1
20	a20a20a20a20a20a20a2
30	a30a30a30a30a30a30a3
40	a40a40a40a40a40a40a4
50	a50a50a50a50a50a50a5
CREATE TABLE t2 ( i int , j blob) ENGINE = Innodb;
ERROR HY000: Table 't2' is read only
UPDATE t1 SET i = i+1;
ERROR HY000: Table 't1' is read only
SELECT i,LEFT(j,20) FROM t1  WHERE i%10=0  ORDER BY i;
i	LEFT(j,20)
10	a10a10a10a10a10a10a1
20	a20a20a20a20a20a20a2
30	a30a30a30a30a30a30a3
40	a40a40a40a40a40a40a4
50	a50a50a50a50a50a50a5
START TRANSACTION;
SET GLOBAL innodb_flush_log_at_trx_commit = 0;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT A;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT B;
ROLLBACK TO A;
"---commit first 50 records with innodb_flush_log_at_trx_commit = 0 --"
COMMIT;
SELECT i,LEFT(j,20) FROM t1  WHERE i%10=0  ORDER BY i;
i	LEFT(j,20)
10	a10a10a10a10a10a10a1
20	a20a20a20a20a20a20a2
30	a30a30a30a30a30a30a3
40	a40a40a40a40a40a40a4
50	a50a50a50a50a50a50a5
START TRANSACTION;
SET GLOBAL innodb_flush_log_at_trx_commit = 1;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT A;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT B;
ROLLBACK TO A;
"---commit first 50 records with innodb_flush_log_at_trx_commit = 1 --"
COMMIT;
SELECT i,LEFT(j,20) FROM t1  WHERE i%10=0  ORDER BY i;
i	LEFT(j,20)
10	a10a10a10a10a10a10a1
20	a20a20a20a20a20a20a2
30	a30a30a30a30a30a30a3
40	a40a40a40a40a40a40a4
50	a50a50a50a50a50a50a5
START TRANSACTION;
SET GLOBAL innodb_flush_log_at_trx_commit = 2;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT A;
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
ERROR HY000: Table 't1' is read only
SAVEPOINT B;
ROLLBACK TO A;
"---commit first 50 records with innodb_flush_log_at_trx_commit = 2 --"
COMMIT;
FLUSH STATUS;
FLUSH LOGS;
FLUSH TABLES t1;
FLUSH TABLES WITH READ LOCK;
UNLOCK TABLES;
USE testdb_wl6445;
DROP DATABASE testdb_wl6445;
SET GLOBAL INNODB_FILE_FORMAT=Antelope;
SET GLOBAL INNODB_FILE_PER_TABLE=1;
SET GLOBAL innodb_large_prefix = 0;
SET GLOBAL innodb_flush_log_at_trx_commit = 1;
