DELETE FROM test_innodb_stats;
SELECT 'dummy INSERT, the table should be empty';
dummy INSERT, the table should be empty
dummy INSERT, the table should be empty
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	0
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	0
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	1
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	1
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (1);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	1
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	2
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (1), (1);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	1
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	3
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (1), (1), (1), (1), (1), (1), (1), (1), (1);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	1
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	10
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (2);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	2
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	2
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (1), (2);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	2
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	3
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (2), (3);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	3
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	3
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (1), (2), (3), (3);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	3
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	5
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
DELETE FROM test_innodb_stats;
INSERT INTO test_innodb_stats (a) VALUES (1), (2), (3), (4), (5), (1), (2), (3), (4), (5);
ANALYZE TABLE test_innodb_stats;
Table	Op	Msg_type	Msg_text
test.test_innodb_stats	analyze	status	OK
SELECT
stat_name,
stat_value,
sample_size,
stat_description
FROM innodb.index_stats
WHERE
database_name = DATABASE() AND
table_name = 'test_innodb_stats' AND
index_name = 'a_key' AND
stat_name IN ('n_diff_pfx01', 'n_diff_pfx02', 'n_leaf_pages', 'size')
ORDER BY stat_name;
stat_name	n_diff_pfx01
stat_value	5
sample_size	1
stat_description	a
stat_name	n_diff_pfx02
stat_value	10
sample_size	1
stat_description	a,DB_ROW_ID
stat_name	n_leaf_pages
stat_value	1
sample_size	NULL
stat_description	Number of leaf pages in the index
stat_name	size
stat_value	1
sample_size	NULL
stat_description	Number of pages in the index
