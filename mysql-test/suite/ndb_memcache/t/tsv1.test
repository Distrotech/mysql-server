
--source suite/ndb_memcache/include/have_memcache.inc

# Test reading & writing tab-separated values

--perl

use strict;
use lib "lib/";
use My::Memcache;

my $mc = My::Memcache->new();
my $port = $ENV{MTR_BUILD_THREAD} * 10 + 10000 + 8;
my $r = $mc->connect("localhost",$port);

if($r == 0) {
  print STDERR "DID NOT CONNECT TO MEMCACHE AT PORT $port \n";
}
else {
  $mc->set("t:1", "One\tTwo\t3");
  
  $r = $mc->get("t:1");
  if($r == "One\tTwo\t3") {
    print ("Read TSV result OK.\n");
  }
}

EOF

SELECT * FROM ndbmemcache.demo_table_tabs where mkey = 1;
DELETE   FROM ndbmemcache.demo_table_tabs;
