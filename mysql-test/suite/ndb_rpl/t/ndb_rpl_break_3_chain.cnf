!include include/default_mysqld.cnf
!include include/default_ndbd.cnf

[cluster_config.cluster1]
NoOfReplicas=                  1
ndbd=
ndb_mgmd=
mysqld=,
ndbapi=,,,,,,,,,

[cluster_config.cluster2]
NoOfReplicas=                  1
ndbd=
ndb_mgmd=
mysqld=
ndbapi=,,,,

[cluster_config.cluster3]
NoOfReplicas=                  1
ndbd=
ndb_mgmd=
mysqld=
ndbapi=,,,,

[mysqld]
# Make all mysqlds use cluster
ndbcluster
ndb-wait-connected=20
ndb-wait-setup=60
ndb-cluster-connection-pool=3
slave-allow-batching
ndb-log-orig
# Turn on bin logging
log-bin=                       cluster1-bin
# for performance reasons
ndb-table-temporary=1
ndb-extra-logging=99

[mysqld.1.cluster1]


[mysqld.1.cluster2]
# Connect mysqld in the second cluster as save to  first mysqld
# Hardcode the host to 127.0.0.1 until running on more
# than one host and it probably need to be masked anyway
# master-host=                @mysqld.1.#host
master-host=                  127.0.0.1
master-port=                  @mysqld.1.cluster1.port
master-password=              @mysqld.1.cluster1.#password
master-user=                  @mysqld.1.cluster1.#user
master-connect-retry=         1

skip-slave-start

log-bin=                      cluster2-bin
relay-log=                    cluster2-relay-bin

log-slave-updates
ndb-log-apply-status

loose-skip-innodb
default-storage-engine=myisam

# Directory where slaves find the dumps generated by "load data"
# on the server. The path need to have constant length otherwise
# test results will vary, thus a relative path is used.
slave-load-tmpdir=            ../../../tmp

[mysqld.1.cluster3]
log-bin=                      cluster3-bin
relay-log=                    cluster3-relay-bin

log-slave-updates
ndb-log-apply-status

loose-skip-innodb
default-storage-engine=myisam

# Directory where slaves find the dumps generated by "load data"
# on the server. The path need to have constant length otherwise
# test results will vary, thus a relative path is used.
slave-load-tmpdir=            ../../../tmp

[ENV]
SERVER_MYPORT_1=              @mysqld.1.cluster1.port
SERVER_MYPORT_2=              @mysqld.1.cluster2.port
SERVER_MYPORT_3=              @mysqld.1.cluster3.port
