!include ../my.cnf

# 2 clusters, each with 2 MySQLDs
# All MySQLDs log-slave-updates
# Potential infinite loops are broken by both servers 
# on each cluster having the same server-id
# To support > 2 clusters and/or different server-ids per
# MySQLD server, we need some other loop breaking 
# mechanism 

[mysqld.1.1]
server-id= 1
log-bin
log-slave-updates

[mysqld.2.1]
server-id= 1
log-bin
log-slave-updates

[mysqld.1.slave]
server-id= 2
log-bin
log-slave-updates
skip-slave-start

[mysqld.2.slave]
server-id= 2
log-bin
ndb_connectstring=	@mysql_cluster.slave.ndb_connectstring

[ENV]

SLAVE_MYPORT1=		@mysqld.2.slave.port
SLAVE_MYSOCK1=		@mysqld.2.slave.socket
