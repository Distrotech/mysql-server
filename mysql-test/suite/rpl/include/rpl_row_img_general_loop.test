#
# This file takes a parameter as an argument:
#  $row_img_test_script
# 
# It should hold the name of the script to run
# with the given combinations 

-- let $row_image_param= 'FULL'
-- source suite/rpl/include/rpl_row_img_set.inc

-- let $image_param_ctr= 3
while($image_param_ctr)
{

  if (`SELECT $image_param_ctr = 2`)
  {
    -- let $row_image_param= 'NOBLOB'
    -- source suite/rpl/include/rpl_row_img_set.inc
  }

  if (`SELECT $image_param_ctr = 1`)
  {
    -- let $row_image_param= 'MINIMAL'
    -- source suite/rpl/include/rpl_row_img_set.inc
  }

  -- let $cur_img= `SELECT @@binlog_row_image`
  -- echo #### row image type: $cur_img

  -- let $engine_type_a= 2
  -- let $mysqld_a_engine=  MyISAM
  while($engine_type_a)
  {
    -- let $engine_type_b= 2
    -- let $mysqld_b_engine=  MyISAM
    while($engine_type_b)
    {
      -- let $engine_type_c= 2
      -- let $mysqld_c_engine=  MyISAM
      while($engine_type_c)
      {
        -- echo ### engines: $mysqld_a_engine, $mysqld_b_engine, $mysqld_c_engine
        -- source $row_img_test_script

        -- let $mysqld_c_engine= InnoDB
        -- dec $engine_type_c
      }
      -- let $mysqld_b_engine= InnoDB
      -- dec $engine_type_b
    }
    -- let $mysqld_a_engine= InnoDB
    -- dec $engine_type_a
  }

  -- dec $image_param_ctr
}

-- let $row_image_param= 'FULL'
-- source suite/rpl/include/rpl_row_img_set.inc

