stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
call mtr.add_suppression("Slave I/O: The slave I/O thread stops because a fatal error is encountered when it tried to SET @master_binlog_checksum");
create table t1(n int);
select * from t1;
n
stop slave sql_thread;
insert into t1 values(1);
insert into t1 values(2);
include/stop_slave.inc
change master to master_user='root';
start slave;
select * from t1;
n
1
2
drop table t1;
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
create table t1 (a int);
insert into t1 values (1);
flush logs;
insert into t1 values (2);
include/stop_slave.inc
delete from t1 where a=2;
CHANGE MASTER TO relay_log_file='slave-relay-bin.000005', relay_log_pos=4;
start slave sql_thread;
start slave io_thread;
set global relay_log_purge=1;
drop table t1;
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
Master_Retry_Count: 
include/stop_slave.inc
CHANGE MASTER TO master_retry_count=20;
include/start_slave.inc
include/stop_slave.inc
CHANGE MASTER TO master_retry_count=0;
include/start_slave.inc
include/stop_slave.inc
CHANGE MASTER TO master_retry_count=1;
include/start_slave.inc
include/stop_slave.inc
CHANGE MASTER TO master_retry_count=10;
include/start_slave.inc
include/stop_slave.inc
CHANGE MASTER TO master_retry_count=RETRY_COUNT_SET;
SELECT RETRY_COUNT_EXPECTED AS current_retry_count;
current_retry_count
RETRY_COUNT_EXPECTED
CHANGE MASTER TO master_connect_retry= 2;
CHANGE MASTER TO master_connect_retry= 1;
### stop slave server
### start slave server
include/start_slave.inc
CHANGE MASTER TO master_retry_count='a';
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''a'' at line 1
CHANGE MASTER TO master_retry_count=-1;
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-1' at line 1
include/stop_slave.inc
CHANGE MASTER TO master_connect_retry= 200, IGNORE_SERVER_IDS= (100, 200, 300, 400, 500);
### stop slave server
### start slave server
include/start_slave.inc
Eexpected values: "100, 200, 300, 400, 500" == "100, 200, 300, 400, 500" or 200 == 200
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
