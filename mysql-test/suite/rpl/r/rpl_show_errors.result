stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
CREATE TABLE t1 (a INT, b blob, PRIMARY KEY(b(512)));
DROP TABLE t1;
DROP TABLE t1;
# assertion: timestamp should be filled
include/stop_slave.inc
# assertion: show that error is preserved after stop slave as well as the timestamp
CREATE TABLE  t1 (a INT, b blob, PRIMARY KEY(b(512)));
include/start_slave.inc
# assertion: show that the error is not reported anymore since replication
#            has resumed correctly
stop slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
reset master;
reset slave;
drop table if exists t1,t2,t3,t4,t5,t6,t7,t8,t9;
start slave;
RESET MASTER;
include/stop_slave.inc
change master to master_port=SLAVE_PORT;
START SLAVE;
*** must be having the replicate-same-server-id IO thread error ***
# assertion: assert that error has been reported as well as a timestamp
include/stop_slave.inc
# assertion: show that error is preserved after stop slave as well as the timestamp
change master to master_port=MASTER_PORT;
include/start_slave.inc
# assertion: show that no error is reported anymore
