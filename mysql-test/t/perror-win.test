# Windows-specific tests
--source include/windows.inc
--require r/have_perror.require

########################################################
############# Skip if Non-English Windows

perl;
open(FILE, ">", "$ENV{MYSQL_TMP_DIR}/syslocale.tmp") or die $!;

if(`systeminfo /FO LIST | find "System Locale"` =~ m/en-us/)
 {print FILE "let \$non_eng_sys= 0;\n";}
else
 {print FILE "let \$non_eng_sys= 1;\n";}
 
close FILE;
EOF

source $MYSQLTEST_VARDIR/tmp/syslocale.tmp;
remove_file $MYSQLTEST_VARDIR/tmp/syslocale.tmp;

if ($non_eng_sys)
{
  skip Need a English Windows Installation;
}

############# Skip if Non-English Windows
########################################################

disable_query_log;
eval select LENGTH("$MY_PERROR") > 0 as "have_perror";
enable_query_log;


--exec $MY_PERROR 150 2>&1
--exec $MY_PERROR 23 2>&1
--exec $MY_PERROR 1062 2>&1
--error 1
--exec $MY_PERROR 30000 2>&1

